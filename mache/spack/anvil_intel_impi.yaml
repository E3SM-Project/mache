spack:
  specs:
  - intel
  - intel-mpi
{% if e3sm_lapack %}
  - intel-mkl
{% endif %}
{% if e3sm_hdf5_netcdf %}
  - hdf5
  - netcdf-c
  - netcdf-fortran
  - parallel-netcdf
{% endif %}
{{ specs }}
  concretizer:
    unify: true
  packages:
    all:
      compiler: [intel@20.0.4]
      providers:
        mpi: [intel-mpi@2019.9.304]
{% if e3sm_lapack %}
        lapack: [intel-mkl@2020.4.304]
{% endif %}
    bison:
      externals:
      - spec: bison@3.0.4
        prefix: /usr
      buildable: false
    bzip2:
      externals:
      - spec: bzip2@1.0.6
        prefix: /gpfs/fs1/software/centos7/spack-latest/opt/spack/linux-centos7-x86_64/gcc-6.5.0/bzip2-1.0.6-mbwr6sk
      buildable: false
    cmake:
      externals:
      - spec: cmake@3.26.3
        prefix: /gpfs/fs1/software/centos7/spack-latest/opt/spack/linux-centos7-x86_64/gcc-11.3.0/cmake-3.26.3-nszudya
      buildable: false
    curl:
      externals:
      - spec: curl@7.72.0~gssapi~libssh~libssh2~nghttp2
        prefix: /gpfs/fs1/software/centos7/spack-latest/opt/spack/linux-centos7-x86_64/gcc-6.5.0/curl-7.72.0-bnppi6e
      buildable: false
    diffutils:
      externals:
      - spec: diffutils@3.7
        prefix: /gpfs/fs1/software/centos7/spack-latest/opt/spack/linux-centos7-x86_64/gcc-6.5.0/diffutils-3.7-lmwmgqg
      buildable: false
    findutils:
      externals:
      - spec: findutils@4.6.0
        prefix: /gpfs/fs1/software/centos7/spack-latest/opt/spack/linux-centos7-x86_64/gcc-6.5.0/findutils-4.6.0-ef3lzvf
      buildable: false
    gettext:
      externals:
      - spec: gettext@0.19.8.1
        prefix: /usr
      buildable: false
    libiconv:
      externals:
      - spec: libiconv@1.16
        prefix: /gpfs/fs1/software/centos7/spack-latest/opt/spack/linux-centos7-x86_64/intel-20.0.4/libiconv-1.16-gcutq6m
      buildable: false
    libxml2:
      externals:
      - spec: libxml2@2.9.10
        prefix: /gpfs/fs1/software/centos7/spack-latest/opt/spack/linux-centos7-x86_64/intel-20.0.4/libxml2-2.9.10-dwvqy3m
      buildable: false
    m4:
      externals:
      - spec: m4@1.4.16
        prefix: /usr
      buildable: false
    openssl:
      externals:
      - spec: openssl@1.0.2k
        prefix: /usr
      buildable: false
    tar:
      externals:
      - spec: tar@1.26
        prefix: /usr
      buildable: false
    xz:
      externals:
      - spec: xz@5.2.5
        prefix: /gpfs/fs1/software/centos7/spack-latest/opt/spack/linux-centos7-x86_64/intel-20.0.4/xz-5.2.5-6uopvxd
      buildable: false
    zlib:
      externals:
      - spec: zlib@1.2.11
        prefix: /gpfs/fs1/software/centos7/spack-latest/opt/spack/linux-centos7-x86_64/gcc-6.5.0/zlib-1.2.11-m3ugpb3
      buildable: false
    perl:
      externals:
      - spec: perl@5.30.3
        prefix: /gpfs/fs1/software/centos7/spack-latest/opt/spack/linux-centos7-x86_64/gcc-6.5.0/perl-5.30.3-co3kopi
        modules:
          - perl/5.30.3-co3kopi
      buildable: false
    intel:
      externals:
      - spec: intel@20.0.4
        modules:
        - gcc/7.4.0
        - intel/20.0.4-lednsve
      buildable: false
    intel-mpi:
      externals:
      - spec: intel-mpi@2019.9.304
        modules:
        - intel-mpi/2019.9.304-i42whlw
      buildable: false
    intel-mkl:
      externals:
      - spec: intel-mkl@2020.4.304
        modules:
        - intel-mkl/2020.4.304-voqlapk
      buildable: false
{% if e3sm_hdf5_netcdf %}
    hdf5:
      externals:
      - spec: hdf5@1.10.7+cxx+fortran+hl+mpi
        prefix: /gpfs/fs1/software/centos7/spack-latest/opt/spack/linux-centos7-x86_64/intel-20.0.4/hdf5-1.10.7-ugvomvt
        modules:
        - hdf5/1.10.7-ugvomvt
      buildable: false
    netcdf-c:
      externals:
      - spec: netcdf-c@4.4.1+mpi~parallel-netcdf
        prefix: /gpfs/fs1/software/centos7/spack-latest/opt/spack/linux-centos7-x86_64/intel-20.0.4/netcdf-c-4.4.1-blyisdg
        modules:
        - netcdf-c/4.4.1-blyisdg
      buildable: false
    netcdf-fortran:
      externals:
      - spec: netcdf-fortran@4.4.4
        prefix: /gpfs/fs1/software/centos7/spack-latest/opt/spack/linux-centos7-x86_64/intel-20.0.4/netcdf-fortran-4.4.4-eanrh5t
        modules:
        - netcdf-fortran/4.4.4-eanrh5t
      buildable: false
    parallel-netcdf:
      externals:
      - spec: parallel-netcdf@1.11.0+cxx+fortran
        prefix: /gpfs/fs1/software/centos7/spack-latest/opt/spack/linux-centos7-x86_64/intel-20.0.4/parallel-netcdf-1.11.0-y3nmmej
        modules:
        - parallel-netcdf/1.11.0-y3nmmej
      buildable: false
{% endif %}
  compilers:
  - compiler:
      spec: intel@20.0.4
      paths:
        cc: /gpfs/fs1/software/centos7/spack-latest/opt/spack/linux-centos7-x86_64/gcc-6.5.0/intel-20.0.4-lednsve/compilers_and_libraries_2020.4.304/linux/bin/intel64/icc
        cxx: /gpfs/fs1/software/centos7/spack-latest/opt/spack/linux-centos7-x86_64/gcc-6.5.0/intel-20.0.4-lednsve/compilers_and_libraries_2020.4.304/linux/bin/intel64/icpc
        f77: /gpfs/fs1/software/centos7/spack-latest/opt/spack/linux-centos7-x86_64/gcc-6.5.0/intel-20.0.4-lednsve/compilers_and_libraries_2020.4.304/linux/bin/intel64/ifort
        fc: /gpfs/fs1/software/centos7/spack-latest/opt/spack/linux-centos7-x86_64/gcc-6.5.0/intel-20.0.4-lednsve/compilers_and_libraries_2020.4.304/linux/bin/intel64/ifort
      flags: {}
      operating_system: centos7
      target: x86_64
      modules:
      - gcc/7.4.0
      - intel/20.0.4-lednsve
      environment: {}
      extra_rpaths: []
